# ๐ค ุชูุงูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู ูุธุงู ุงูุชุนููู ุงูุฐูู ุงูุนููุงูู

## 1. ูุธุฑุฉ ุนุงูุฉ ุนูู ูุณุงุฑ ุงูุฏุฑุฏุดุฉ ูุน AI

ุงููุณุงุฑ ุงูุญุงูู ูุฑุณุงูุฉ ุงููุณุชุฎุฏู ูู ุงููุงุฌูุฉ ุญุชู ูุฒูุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู (Gemini) ูู:

```text
ูุงุฌูุฉ ุงูููุจ (Frontend)
  โโ useMessageHandlers (AI Assistant)
       โโ aiService.sendMessageWithIntent()
            โโ HTTP POST โ /api/ai/intent-chat
                 โโ FastAPI (api_gateway)
                      โโ ai_intent_routes.intent_chat
                           โโ GeminiIntegration.chat() โ Google Gemini API
```

- **ุงูุฑุฏ ุงูููุงุฆู** ูุนูุฏ ูููุงุฌูุฉ ููุชุญููู ุฅูู:
  - ุฑุณุงูุฉ ูุณุงุนุฏ (`assistant` message) ูู ูุงุฌูุฉ ุงูุฏุฑุฏุดุฉ.
  - ูุงุฆู `intent` ูุญุชูู ุนูู:
    - `intent_type` (ูุซู: `create_project`, `create_office`, `code_help` โฆ).
    - `confidence` (0โ1).
    - `suggested_path`, `suggested_title`, `suggested_description`.

ูุฐู ุงููุนูููุงุช ุชุณุชุฎุฏู ูุนุฑุถ ูุงูุฐุฉ ุงูุชุฑุงุญ ุชูููู ูููุณุชุฎุฏู (ูุซูุงู ุงูุงูุชูุงู ุฅูู `/projects/new`).

---

## 2. ุงููููุงุช ุงูุฃุณุงุณูุฉ ูู ุงูุชูุงูู

### 2.1 ุทุจูุฉ ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend)

- `src/services/api/ai-service.ts`
  - `sendMessageWithIntent(messages, options?)`  
    - ูุชุตู ุจู `POST {VITE_AI_API_URL || http://localhost:8001/api/ai}/intent-chat`.
    - ููุฑุฌุน:
      - `message`: ูุต ุงูุฑุฏ ูุนุฑุถู ูู ุงูุฏุฑุฏุดุฉ.
      - `intent`: ุงูุชุฑุงุญุงุช ุงูููุฉ/ุงูุชููู (ุฅู ููุฌุฏุช).

- `src/modules/ai-assistant/hooks/useMessageHandlers.ts`
  - ุงููุณุคูู ุนู:
    - ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุฑุณุงุฆู (`messages`).
    - ุฅุฑุณุงู ุงูุฑุณุงุฆู ุฅูู `aiService.sendMessageWithIntent` ูุน ุงูู history ูุงูู.
    - ุฅุถุงูุฉ ุฑุณุงูุฉ ุงููุณุงุนุฏ ุจูุงุกู ุนูู ุฑุฏ AI.
    - ูุชุญ ูุงูุฐุฉ ุงูุชุฑุงุญ ุตูุญุฉ ุฅุฐุง ุฃุนุงุฏ ุงูู backend ุญูู `intent` ูุน `suggested_path` ู `title`.

> ููุงุญุธุฉ: ุงูููุทู ุงููุฏูู ุงููุฏูู ูุชุญููู ุงูููุฉ (`intent-analyzer.ts`) ุชูุช ุฅุฒุงูุชู ูู ุงูุชุดุบููุ ูุฃุตุจุญ ุงูุชุญููู ูุฃุชู ูู GEMINI ุนุจุฑ ุงูู backend.

---

### 2.2 ุทุจูุฉ ุงูู Backend (API Gateway)

- `01-OPERATING-SYSTEM/api_gateway/fastapi_server.py`
  - ูุถููู:
    - `ai_routes` โ ูุณุงุฑุงุช ุงููุญุงุฏุซุฉ/ุงูููุฏ ุงูุชูููุฏูุฉ (`/api/ai/chat`, `/generate-code`, ...).
    - `ai_intent_routes` โ ุงููุณุงุฑ ุงููุชูุฏู ูุชุญููู ุงูููุฉ (`/api/ai/intent-chat`).
  - ูุญููู ููู `.env` ูู ุฌุฐุฑ ุงููุดุฑูุน ูููุฑุฃ ููุงุชูุญ ูุซู `GEMINI_API_KEY`.

- `01-OPERATING-SYSTEM/api_gateway/routes/ai_intent_routes.py`
  - ูููุฑ ุงููุณุงุฑ:
    - `POST /api/ai/intent-chat`
  - ูุง ููุนูู:
    1. ูุณุชูุจู `messages` (ุงูุชุงุฑูุฎ ุงููุงูู + ุขุฎุฑ ุฑุณุงูุฉ ูููุณุชุฎุฏู).
    2. ูุจูู **System Prompt** ูุทูุจ ูู GEMINI ุฃู ูุนูุฏ JSON ููุธู ูุญุชูู ุนูู:
       - `assistant_reply`
       - `intent_type`
       - `confidence`
       - `suggested_path`
       - `suggested_title`
       - `suggested_description`
    3. ูุณุชุฏุนู `GeminiIntegration.chat(...)` ูู ุทุจูุฉ ุงูุชูุงูู ุงูุฎุงุฑุฌู.
    4. ูุญุงูู ูุฑุงุกุฉ JSON ูู ุฑุฏ GEMINI:
       - ุฅุฐุง ูุงู ุตุงูุญุงู โ ูุญููู ุฅูู `IntentChatResponse`.
       - ุฅุฐุง ูู ููู JSON ุตุงูุญุงู โ ูุฑุฌุน ุงููุต ุงูุฎุงู ูู `message` ุจุฏูู `intent`.

---

### 2.3 ุทุจูุฉ ุงูุชูุงูู ูุน ูุฒููุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู

- `17-EXTERNAL-INTEGRATIONS/ai-services/gemini-integration.py`
  - `GeminiIntegration.chat(messages, model, temperature, max_tokens, system_prompt)`:
    - ููููู `google.generativeai` ุจุงูููุชุงุญ `GEMINI_API_KEY`.
    - ูุญููู ุงูุฑุณุงุฆู ุฅูู prompt ูุตู ููุงุณุจ ูู Gemini.
    - ูุณุชุฏุนู `generate_content` ููุนูุฏ:
      - `message`: ุงููุต ุงููุงุชุฌ ูู ุงููููุฐุฌ.
      - `usage`: ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู (tokens).
      - `model`: ูููุฐุฌ Gemini ุงููุณุชุฎุฏู.
      - `timestamp`: ููุช ุงูุงุณุชุฌุงุจุฉ.

---

## 3. ุฌุฏูู ุฃููููุงุช ุงูุชุทููุฑ (Roadmap ููุฐูุงุก ุงูุงุตุทูุงุนู)

### 3.1 ุงูุฃููููุงุช ุงูุญุงููุฉ (ุนุงููุฉ)

| ุงูุฃููููุฉ | ุงูุจูุฏ                                   | ุงููุตู ุงููุฎุชุตุฑ                                                                 | ุงูุญุงูุฉ |
|---------|------------------------------------------|-------------------------------------------------------------------------------|--------|
| 1       | ุชุซุจูุช ูุณุงุฑ `intent-chat` ูู ุงูุฅูุชุงุฌ      | ุงูุชุฃูุฏ ูู ุฃู ุตูุญุฉ ุงูุฏุฑุฏุดุฉ ุชุณุชุฎุฏู ุฏุงุฆููุง `sendMessageWithIntent` ุจุฏูู fallbacks ูุฏููุฉ | ููุฏ ุงูุชูููุฐ |
| 2       | ุงุณุชูุฑุงุฑ ุงูุงุชุตุงู ูุน GEMINI               | ุงุฎุชุจุงุฑ ุดุงูู ููุณุงุฑุงุช `/api/ai/chat` ู `/api/ai/intent-chat` ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุจูุถูุญ   | ููุฏ ุงูุชูููุฐ |
| 3       | ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ูู ุตูุญุฉ ุงูุฏุฑุฏุดุฉ           | ุชุญุณูู ุฑุณุงุฆู ุงูุงูุชุธุงุฑ ูุงูุฃุฎุทุงุก ูุงูุชูุจููุงุชุ ูุถุจุท ูุงุฌูุฉ ุงูุงูุชุฑุงุญ (navigation modal)    | ูุฎุทุท |

### 3.2 ุชุญุณููุงุช ูุชูุณุทุฉ ุงููุฏู

| ุงูุฃููููุฉ | ุงูุจูุฏ                                     | ุงููุตู ุงููุฎุชุตุฑ                                                                 | ุงูุญุงูุฉ |
|---------|--------------------------------------------|-------------------------------------------------------------------------------|--------|
| 4       | ุฏุนู ูุฒููุฏุงุช ุฃุฎุฑู (OpenAI / Anthropic)     | ุชูุนูู `openai-integration` ู `anthropic-integration` ูุฑุจุทูุง ุจูุณุงุฑ `intent-chat` | ูุฎุทุท |
| 5       | ุชุฎุตูุต System Prompt ุญุณุจ ุงูุณูุงู            | ุชุบููุฑ ุงูู prompt ุจุญุณุจ ููุน ุงูุตูุญุฉ (ุชุนูููุ ูุดุงุฑูุนุ Officeุ IDEุ ุฅูุฎ)           | ูุฎุทุท |
| 6       | ุชุณุฌูู ุฌูุณุงุช ุงููุญุงุฏุซุฉ ูุชุญููููุง            | ุชุฎุฒูู ุงูู chat sessions ูุฃุญุฏุงุซ `intent` ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุญููู ุงูุงุณุชุฎุฏุงู   | ูุฎุทุท |

### 3.3 ุชุทููุฑุงุช ูุชูุฏูุฉ

| ุงูุฃููููุฉ | ุงูุจูุฏ                                          | ุงููุตู ุงููุฎุชุตุฑ                                                                      | ุงูุญุงูุฉ |
|---------|-------------------------------------------------|------------------------------------------------------------------------------------|--------|
| 7       | ุฑุจุท ูุจุงุดุฑ ูุน 00-AI-CORE-SYSTEM                  | ุฌุนู AI Core ุงูุฏุงุฎูู ูุถูู ุทุจูุฉ ููุทู ููู ูุฎุฑุฌุงุช GEMINI (ุชุฎุตูุต ุชุนูููู/ูุญูู)            | ูุฎุทุท |
| 8       | ูุธุงู ุชูุฌูู ุฐูู (Orchestrator) ูุงุฎุชูุงุฑ ุงููุฒููุฏ   | ุงุฎุชูุงุฑ ุงููุฒููุฏ/ุงููููุฐุฌ ุงูุฃูุณุจ ุฏููุงููููุงู ุญุณุจ ููุน ุงูุทูุจ ูุงูุชูููุฉ ูุงูุฒูู              | ูุฎุทุท |
| 9       | ูุฑุงูุจุฉ ุฌูุฏุฉ ุงูุฅุฌุงุจุงุช ูุฅุนุงุฏุฉ ุงูุชุฏุฑูุจ (Feedback) | ุชุฌููุน ุชููููุงุช ุงููุณุชุฎุฏููู ุนูู ุงูุฑุฏูุฏ ูุจูุงุก ูุธุงู ุชุญุณูู ูุณุชูุฑ ููู prompts ูุงูุณูุงุณุงุช    | ูุฎุทุท |

---

## 4. ููุงุญุธุงุช ุชูุธูููุฉ

- **ูุตุฏุฑ ุงูุญูููุฉ ููุณุงุฑ ุงูุฏุฑุฏุดุฉ** ูู ูุฐุง ุงููุณุชูุฏ ุจุงูุฅุถุงูุฉ ุฅูู:
  - `ai-service.ts`
  - `useMessageHandlers.ts`
  - `ai_intent_routes.py`
  - `gemini-integration.py`
- ุฃู ุชุบููุฑ ูุณุชูุจูู ูู ูุณุงุฑ ุงูุชูุงูู (ุชุบููุฑ ูุฒููุฏุ ุฅุถุงูุฉ ููุฒุฉ) ูุฌุจ ุฃู ููุญุฏูุซ ููุง ุจุงุฎุชุตุงุฑ.

ูุฐุง ุงูููู ูุฎุตุต ูููุทููุฑูู ูููู โุตูุฑุฉ ูุงุญุฏุฉ ูุงุถุญุฉโ ุนู ุชูุงูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุฏุงุฎู ุงููุดุฑูุน. 


