---
description: تنفيذ سير عمل تخطيط التنفيذ باستخدام قالب الخطة لتوليد مستندات التصميم.
handoffs: 
  - label: إنشاء المهام
    agent: speckit.tasks
    prompt: قسّم الخطة إلى مهام
    send: true
  - label: إنشاء قائمة التحقق
    agent: speckit.checklist
    prompt: قم بإنشاء قائمة تحقق للمجال التالي...
---

## مدخلات المستخدم (User Input)

```text
$ARGUMENTS
```

يجب عليك **مراعاة** مدخلات المستخدم قبل المتابعة (إذا لم تكن فارغة).

## المخطط العام (Outline)

1. **الإعداد**: شغل `.specify/scripts/bash/setup-plan.sh --json` من جذر المستودع وقم بتحليل JSON للحصول على `FEATURE_SPEC`, `IMPL_PLAN`, `SPECS_DIR`, `BRANCH`. (ينتظر السكربت العثور على المواصفات في `planning/specs/`). للاقتباسات الفردية في الوسائط مثل "I'm Groot"، استخدم صيغة الهروب: مثال `'I'\''m Groot'` (أو اقتباس مزدوج إذا أمكن: `"I'm Groot"`).

2. **تحميل السياق**: اقرأ `FEATURE_SPEC` و `.specify/memory/constitution.md`. حمل قالب خطة التنفيذ `IMPL_PLAN` (تم نسخه بالفعل).

3. **تنفيذ سير عمل الخطة**: اتبع الهيكل في قالب `IMPL_PLAN` للقيام بما يلي:
   - ملء السياق التقني (ضع علامة "NEEDS CLARIFICATION" للمجهول)
   - ملء قسم فحص الدستور من الدستور
   - تقييم البوابات (خطأ إذا كانت الانتهاكات غير مبررة)
   - المرحلة 0: توليد `research.md` (حل جميع NEEDS CLARIFICATION)
   - المرحلة 1: توليد `data-model.md`, `contracts/`, `quickstart.md`
   - المرحلة 1: تحديث سياق الوكيل عن طريق تشغيل سكربت الوكيل
   - إعادة تقييم فحص الدستور بعد التصميم

4. **التوقف والإبلاغ**: ينتهي الأمر بعد تخطيط المرحلة 2. أبلغ عن الفرع، مسار `IMPL_PLAN`، والمستندات التي تم إنشاؤها.

## المراحل (Phases)

### المرحلة 0: المخطط والبحث

1. **استخراج المجهول من السياق التقني** أعلاه:
   - لكل NEEDS CLARIFICATION ← مهمة بحث
   - لكل تبعية ← مهمة أفضل الممارسات
   - لكل تكامل ← مهمة أنماط

2. **توليد وإرسال وكلاء البحث**:

   ```text
   For each unknown in Technical Context:
     Task: "Research {unknown} for {feature context}"
   For each technology choice:
     Task: "Find best practices for {tech} in {domain}"
   ```

3. **تجميع النتائج** في `research.md` باستخدام التنسيق:
   - القرار: [ما تم اختياره]
   - المبرر: [لماذا تم الاختيار]
   - البدائل التي تم النظر فيها: [ما تم تقييمه أيضاً]

**الإخراج**: `research.md` مع حل جميع NEEDS CLARIFICATION

### المرحلة 1: التصميم والعقود

**المتطلبات الأساسية:** `research.md` مكتمل

1. **استخراج الكيانات من مواصفات الميزة** ← `data-model.md`:
   - اسم الكيان، الحقول، العلاقات
   - قواعد التحقق من المتطلبات
   - انتقالات الحالة إذا كان ذلك ممكناً

2. **توليد عقود API** من المتطلبات الوظيفية:
   - لكل إجراء مستخدم ← نقطة نهاية (endpoint)
   - استخدم أنماط REST/GraphQL القياسية
   - إخراج مخطط OpenAPI/GraphQL إلى `/contracts/`

3. **تحديث سياق الوكيل**:
   - شغل `.specify/scripts/bash/update-agent-context.sh claude`
   - تكتشف هذه السكربتات أي وكيل ذكاء اصطناعي قيد الاستخدام
   - حدث ملف السياق الخاص بالوكيل المناسب
   - أضف فقط التكنولوجيا الجديدة من الخطة الحالية
   - حافظ على الإضافات اليدوية بين العلامات

**الإخراج**: `data-model.md`, `/contracts/*`, `quickstart.md`, ملف خاص بالوكيل

## قواعد رئيسية

- استخدم مسارات مطلقة
- خطأ عند فشل البوابات أو التوضيحات غير المحلولة
