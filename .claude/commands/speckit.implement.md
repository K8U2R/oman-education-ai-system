---
description: تنفيذ خطة التنفيذ عن طريق معالجة وتنفيذ جميع المهام المحددة في tasks.md
---

## مدخلات المستخدم (User Input)

```text
$ARGUMENTS
```

يجب عليك **مراعاة** مدخلات المستخدم قبل المتابعة (إذا لم تكن فارغة).

## المخطط العام (Outline)

1. شغل `.specify/scripts/bash/check-prerequisites.sh --json --require-tasks --include-tasks` من جذر المستودع وقم بتحليل `FEATURE_DIR` وقائمة `AVAILABLE_DOCS`. يجب أن تكون جميع المسارات مطلقة. للاقتباسات الفردية في الوسائط مثل "I'm Groot"، استخدم صيغة الهروب: مثال `'I'\''m Groot'` (أو اقتباس مزدوج إذا أمكن: `"I'm Groot"`).

2. **تحقق من حالة قوائم التحقق** (إذا كان المجلد `FEATURE_DIR/checklists/` موجوداً):
   - امسح جميع ملفات قوائم التحقق في مجلد `checklists/`.
   - لكل قائمة تحقق، احسب:
     - العناصر الكلية: جميع الأسطر المطابقة لـ `- [ ]` أو `- [X]` أو `- [x]`
     - العناصر المكتملة: الأسطر المطابقة لـ `- [X]` أو `- [x]`
     - العناصر غير المكتملة: الأسطر المطابقة لـ `- [ ]`
   - أنشئ جدول الحالة:

     ```text
     | القائمة | الكل | مكتمل | غير مكتمل | الحالة |
     |-----------|-------|-----------|------------|--------|
     | ux.md     | 12    | 12        | 0          | ✓ نجاح |
     | test.md   | 8     | 5         | 3          | ✗ فشل |
     | security.md | 6   | 6         | 0          | ✓ نجاح |
     ```

   - احسب الحالة العامة:
     - **نجاح**: جميع القوائم لديها 0 عناصر غير مكتملة.
     - **فشل**: قائمة واحدة أو أكثر لديها عناصر غير مكتملة.

   - **إذا كانت أي قائمة غير مكتملة**:
     - اعرض الجدول مع عدد العناصر غير المكتملة.
     - **توقف** واسأل: "بعض قوائم التحقق غير مكتملة. هل تريد المتابعة في التنفيذ على أي حال؟ (نعم/لا)"
     - انتظر رد المستخدم قبل المتابعة.
     - إذا قال المستخدم "لا" أو "انتظر" أو "توقف"، أوقف التنفيذ.
     - إذا قال المستخدم "نعم" أو "تابع" أو "استمر"، انتقل للخطوة 3.

   - **إذا كانت جميع القوائم مكتملة**:
     - اعرض الجدول الذي يظهر نجاح جميع القوائم.
     - انتقل تلقائياً إلى الخطوة 3.

3. تحميل وتحليل سياق التنفيذ:
   - **مطلوب**: اقرأ `tasks.md` للحصول على قائمة المهام الكاملة وخطة التنفيذ.
   - **مطلوب**: اقرأ `plan.md` للمكدس التقني، الهندسة، وهيكل الملفات.
   - **إذا وجد**: اقرأ `data-model.md` للكيانات والعلاقات.
   - **إذا وجد**: اقرأ `contracts/` لمواصفات API ومتطلبات الاختبار.
   - **إذا وجد**: اقرأ `research.md` للقرارات التقنية والقيود.
   - **إذا وجد**: اقرأ `quickstart.md` لسيناريوهات التكامل.

4. **التحقق من إعداد المشروع**:
   - **مطلوب**: إنشاء/التحقق من ملفات التجاهل بناءً على إعداد المشروع الفعلي:

   **منطق الكشف والإنشاء**:
   - تحقق مما إذا كان الأمر التالي ينجح لتحديد ما إذا كان المستودع هو git repo (أنشئ/تحقق من .gitignore إذا كان كذلك):

     ```sh
     git rev-parse --git-dir 2>/dev/null
     ```

   - تحقق من وجود `Dockerfile*` أو Docker في `plan.md` ← أنشئ/تحقق من `.dockerignore`
   - تحقق من وجود `.eslintrc*` ← أنشئ/تحقق من `.eslintignore`
   - تحقق من وجود `eslint.config.*` ← تأكد من أن مدخلات `ignores` في التكوين تغطي الأنماط المطلوبة
   - تحقق من وجود `.prettierrc*` ← أنشئ/تحقق من `.prettierignore`
   - تحقق من وجود `.npmrc` أو `package.json` ← أنشئ/تحقق من `.npmignore` (إذا كان للنشر)
   - تحقق من وجود ملفات terraform (`*.tf`) ← أنشئ/تحقق من `.terraformignore`
   - تحقق من الحاجة لـ `.helmignore` (وجود مخططات helm) ← أنشئ/تحقق من `.helmignore`

   **إذا كان ملف التجاهل موجوداً بالفعل**: تحقق من احتوائه على الأنماط الأساسية، وألحق الأنماط المفقودة الحرجة فقط.
   **إذا كان ملف التجاهل مفقوداً**: أنشئه بمجموعة الأنماط الكاملة للتكنولوجيا المكتشفة.

   **الأنماط الشائعة حسب التكنولوجيا** (من المكدس التقني في plan.md):
   - **Node.js/JavaScript/TypeScript**: `node_modules/`, `dist/`, `build/`, `*.log`, `.env*`
   - **Python**: `__pycache__/`, `*.pyc`, `.venv/`, `venv/`, `dist/`, `*.egg-info/`
   - **Java**: `target/`, `*.class`, `*.jar`, `.gradle/`, `build/`
   - **C#/.NET**: `bin/`, `obj/`, `*.user`, `*.suo`, `packages/`
   - **Go**: `*.exe`, `*.test`, `vendor/`, `*.out`
   - **Ruby**: `.bundle/`, `log/`, `tmp/`, `*.gem`, `vendor/bundle/`
   - **PHP**: `vendor/`, `*.log`, `*.cache`, `*.env`
   - **Rust**: `target/`, `debug/`, `release/`, `*.rs.bk`, `*.rlib`, `*.prof*`, `.idea/`, `*.log`, `.env*`
   - **Kotlin**: `build/`, `out/`, `.gradle/`, `.idea/`, `*.class`, `*.jar`, `*.iml`, `*.log`, `.env*`
   - **C++**: `build/`, `bin/`, `obj/`, `out/`, `*.o`, `*.so`, `*.a`, `*.exe`, `*.dll`, `.idea/`, `*.log`, `.env*`
   - **C**: `build/`, `bin/`, `obj/`, `out/`, `*.o`, `*.a`, `*.so`, `*.exe`, `Makefile`, `config.log`, `.idea/`, `*.log`, `.env*`
   - **Swift**: `.build/`, `DerivedData/`, `*.swiftpm/`, `Packages/`
   - **R**: `.Rproj.user/`, `.Rhistory`, `.RData`, `.Ruserdata`, `*.Rproj`, `packrat/`, `renv/`
   - **Universal**: `.DS_Store`, `Thumbs.db`, `*.tmp`, `*.swp`, `.vscode/`, `.idea/`

   **أنماط خاصة بالأدوات**:
   - **Docker**: `node_modules/`, `.git/`, `Dockerfile*`, `.dockerignore`, `*.log*`, `.env*`, `coverage/`
   - **ESLint**: `node_modules/`, `dist/`, `build/`, `coverage/`, `*.min.js`
   - **Prettier**: `node_modules/`, `dist/`, `build/`, `coverage/`, `package-lock.json`, `yarn.lock`, `pnpm-lock.yaml`
   - **Terraform**: `.terraform/`, `*.tfstate*`, `*.tfvars`, `.terraform.lock.hcl`
   - **Kubernetes/k8s**: `*.secret.yaml`, `secrets/`, `.kube/`, `kubeconfig*`, `*.key`, `*.crt`

5. تحليل هيكل `tasks.md` واستخراج:
   - **مراحل المهمة**: الإعداد، الاختبارات، الجوهر، التكامل، التحسين
   - **تبعيات المهمة**: قواعد التنفيذ المتسلسل مقابل المتوازي
   - **تفاصيل المهمة**: المعرف، الوصف، مسارات الملفات، علامات التوازي [P]
   - **تدفق التنفيذ**: متطلبات الترتيب والتبعية

6. تنفيذ التطبيق باتباع خطة المهام:
   - **تنفيذ مرحلة بمرحلة**: أكمل كل مرحلة قبل الانتقال للتالية
   - **احترام التبعيات**: شغل المهام المتسلسلة بالترتيب، المهام المتوازية [P] يمكن أن تعمل معاً
   - **اتباع نهج TDD**: نفذ مهام الاختبار قبل مهام التنفيذ المقابلة لها
   - **التنسيق القائم على الملفات**: المهام التي تؤثر على نفس الملفات يجب أن تعمل بالتسلسل
   - **نقاط التحقق من الصحة**: تحقق من اكتمال كل مرحلة قبل المتابعة

7. قواعد تنفيذ التطبيق:
   - **الإعداد أولاً**: هيئ هيكل المشروع، التبعيات، التكوين
   - **الاختبارات قبل الكود**: إذا كنت بحاجة لكتابة اختبارات للعقود، الكيانات، وسيناريوهات التكامل
   - **التطوير الجوهري**: نفذ النماذج، الخدمات، أوامر CLI، نقاط النهاية
   - **عمل التكامل**: اتصالات قاعدة البيانات، البرمجيات الوسيطة، التسجيل، الخدمات الخارجية
   - **التحسين والتحقق**: اختبارات الوحدة، تحسين الأداء، التوثيق

8. تتبع التقدم ومعالجة الأخطاء:
   - أبلغ عن التقدم بعد كل مهمة مكتملة
   - أوقف التنفيذ إذا فشلت أي مهمة غير متوازية
   - للمهام المتوازية [P]، استمر مع المهام الناجحة، وأبلغ عن الفاشلة
   - قدم رسائل خطأ واضحة مع سياق لتصحيح الأخطاء
   - اقترح الخطوات التالية إذا لم يمكن متابعة التنفيذ
   - **هام** للمهام المكتملة، تأكد من وضع علامة [X] على المهمة في ملف المهام.

9. التحقق من الاكتمال:
   - تحقق من اكتمال جميع المهام المطلوبة
   - تحقق من أن الميزات المنفذة تطابق المواصفات الأصلية
   - تحقق من أن الاختبارات تنجح والتغطية تلبي المتطلبات
   - أكد أن التنفيذ يتبع الخطة التقنية
   - أبلغ عن الحالة النهائية مع ملخص للعمل المنجز

ملاحظة: هذا الأمر يفترض وجود تقسيم كامل للمهام في `tasks.md`. إذا كانت المهام غير مكتملة أو مفقودة، اقترح تشغيل `/speckit.tasks` أولاً لإعادة توليد قائمة المهام.
