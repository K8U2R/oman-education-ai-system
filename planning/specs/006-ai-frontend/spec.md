# المواصفات: تكامل واجهة الذكاء الاصطناعي (AI Frontend Integration)

## 1. المقدمة
تهدف هذه المرحلة إلى بناء واجهة المستخدم (UI) الخاصة بـ "مولد الدروس" (Lesson Generator). ستقوم هذه الواجهة بربط المستخدم النهائي بخدمات الذكاء الاصطناعي التي تم بناؤها في الـ Backend (Phase 7). يجب أن تعكس الواجهة "السيادة البصرية" (Sovereign Design) التي تم تأسيسها في Phase 8.

## 2. قصص المستخدم
- **كمعلم**، أريد نموذجاً بسيطاً لإدخال (المادة، الصف، العنوان) لتوليد خطة درس.
- **كمعلم**، أريد أن أرى مؤشراً مرئياً (Loading State) أثناء التوليد لأن الذكاء الاصطناعي قد يستغرق وقتاً.
- **كمشترك مميز (Premium)**، أريد أن تظهر الواجهة بلمسات ذهبية وتأثيرات زجاجية لتعزيز الشعور بالفخامة.
- **كمستخدم**، أريد عرض النتيجة بتنسيق Markdown جميل وسهل القراءة مع إمكانية النسخ أو التصدير (مستقبلاً).

## 3. المتطلبات التقنية

### 3.1 المسارات (Routes)
- `/teacher/ai/lessons/new`: صفحة التوليد الجديدة.
- إضافة المسار في `ai.routes.ts` (Frontend) وربطه بـ `Layout`.

### 3.2 المكونات (Components)
- `LessonGeneratorForm`: نموذج يستخدم `react-hook-form` و `zod` للتحقق (مطابق للـ Backend Schema).
- `LessonResultCard`: مكون لعرض خطة الدرس المولدة (يدعم Markdown Rendering).
- `AiService`: خدمة Frontend للاتصال بـ `POST /api/v1/ai/lessons/generate`.

### 3.3 التكامل مع الأنماط السيادية
- استخدام `glass-card` للحاويات.
- استخدام `btn-gradient` لأزرار التوليد.
- التأكد من دعم RTL (اللغة العربية) بشكل كامل.

## 4. تدفق البيانات (Data Flow)
1. المستخدم يملأ النموذج -> `LessonGeneratorForm`.
2. استدعاء `AiService.generateLesson(payload)`.
3. الخدمة تتصل بـ Backend (`axios`).
4. الـ Backend يستدعي `MockAIProvider` (أو Ollama).
5. النتيجة تعود كـ JSON.
6. الـ Frontend يعرض النتيجة في `LessonResultCard`.

## 5. معايير القبول
1.  يعمل النموذج باللغتين (العربية/الإنجليزية).
2.  يتم عرض رسالة خطأ واضحة (Toast) إذا فشل الاتصال.
3.  يتم عرض الخطة الدراسية بشكل منسق (العناوين، القوائم).
