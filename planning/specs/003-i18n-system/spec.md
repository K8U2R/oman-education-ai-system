# مواصفات الميزة: نظام تعدد اللغات (Multi-Language System)

**فرع الميزة**: `003-i18n-system`
**تاريخ الإنشاء**: 2026-02-03
**الحالة**: مسودة (Draft)
**المدخلات**: "بناء خطة متكاملة لنظام اللغة (عربي/إنجليزي) وتحديث جميع الصفحات."

## سيناريوهات المستخدم والاختبار (User Scenarios & Testing)

### قصة المستخدم 1 - تبديل لغة الواجهة (الأولوية: P1)

كمستخدم (طالب، معلم، مطور)، أريد أن أكون قادراً على تبديل لغة الواجهة بالكامل بين العربية والإنجليزية بضغطة زر، بحيث تتغير النصوص واتجاه الصفحة (RTL/LTR) فوراً.

**لماذا هذه الأولوية**: العربية هي اللغة الرسمية والأساسية لنظام تعليمي وطني، والإنجليزية ضرورية للمصطلحات التقنية والبرمجة. لا يمكن للنظام أن يعمل بدقة دون دعم كامل لكليهما.

**اختبار مستقل**: يمكن اختبار الميزة بتبديل اللغة والتحقق من أن القوائم والنصوص والتخطيط (Layout) ينعكس بشكل صحيح دون إعادة تحميل الصفحة.

**سيناريوهات القبول**:
1. **نظراً لـ** واجهة باللغة الإنجليزية (LTR)، **عندما** يختار المستخدم "العربية"، **إذن** تتحول النصوص للعربية ويصبح الاتجاه (RTL).
2. **نظراً لـ** مستخدم جديد يزور الموقع، **عندما** يدخل لأول مرة، **إذن** تكتشف اللغة المفضلة من المتصفح أو تفتقد للعربية بشكل افتراضي.

---

### قصة المستخدم 2 - توطين رسائل الخطأ من الخادم (الأولوية: P1)

كمطور أو مستخدم، أريد أن تصلني رسائل الخطأ والنجاح من الخادم (Backend) بنفس لغة الواجهة المختارة في الواجهة الأمامية.

**لماذا هذه الأولوية**: التناسق بين الواجهة والبيانات الخلفية ضروري لتجربة مستخدم محترمة.

**اختبار مستقل**: إرسال طلب API برأس `Accept-Language: ar` والتحقق من أن رسالة الخطأ في الاستجابة تكون بالعربية.

**سيناريوهات القبول**:
1. **نظراً لـ** واجهة عربية، **عندما** يفشل تسجيل الدخول، **إذن** تظهر رسالة "كلمة المرور غير صحيحة" وليس "Invalid password".

---

## المتطلبات (Requirements)

### المتطلبات الوظيفية

- **FR-001**: النظام يجب أن يدعم اللغتين العربية (ar) والإنجليزية (en) بشكل كامل.
- **FR-002**: الواجهة الأمامية يجب أن تدعم تغيير الاتجاه (Directionality) تلقائياً: `dir="rtl"` للعربية و `dir="ltr"` للإنجليزية.
- **FR-003**: جميع النصوص الظاهرة للمستخدم (Labels, Buttons, Tooltips) يجب أن تكون مفصولة في ملفات ترجمة (JSON) ولا تكون hardcoded.
- **FR-004**: النظام الخلفي (Backend) يجب أن يقبل ترويسة `Accept-Language` ويعيد الاستجابات المترجمة بناءً عليها.
- **FR-005**: تفضيل اللغة يجب أن يُحفظ في التخزين المحلي (localStorage) وكوكيز لضمان استمراره عبر الجلسات.

### الكيانات الرئيسية

- **TranslationResource**: ملفات JSON تحتوي على أزواج المفاتيح والقيم (Key-Value) لكل لغة.
- **LanguageContext**: مزود حالة في React يدير اللغة الحالية والاتجاه.

## معايير النجاح (Success Criteria)

### نتائج قابلة للقياس

- **SC-001**: 100% من صفحات النظام (بما في ذلك لوحة التحكم، صفحات تسجيل الدخول، والمودال) تدعم التبديل اللحظي.
- **SC-002**: لا توجد نصوص إنجليزية تظهر عند اختيار اللغة العربية (Zero Hardcoded Strings).
- **SC-003**: التبديل بين اللغات يستغرق أقل من 1 ثانية (بدون إعادة تحميل كاملة للصفحة).
