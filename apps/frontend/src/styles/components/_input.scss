/**
 * Input Component Styles
 * @law Law-6 (Visual Sovereign) - OKLCH tokens
 */

@use '../abstracts/engine-helpers' as *;
@use '../abstracts/foundation-typography' as *;
@use '../abstracts/foundation-colors' as *;

.input-wrapper {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
    width: auto;

    &--full-width {
        width: 100%;
    }

    &__label {
        font-size: $font-size-sm;
        font-weight: var(--font-weight-medium);
        color: var(--color-text-main);
    }

    &__container {
        position: relative;
        display: flex;
        align-items: center;
    }

    &__icon {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        color: var(--color-text-secondary);
        /* Refined icon color */
        pointer-events: none;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10;

        &--left {
            left: var(--space-md);
        }

        &--right {
            right: var(--space-md);
        }

        svg {
            width: 20px;
            height: 20px;
        }
    }

    &__error {
        font-size: $font-size-xs;
        color: var(--color-error);
        margin-top: var(--space-2xs);
    }

    &__helper {
        font-size: $font-size-xs;
        color: var(--color-text-secondary);
        margin-top: var(--space-2xs);
    }
}

.input {
    width: 100%;
    height: 48px;
    /* Fixed height for consistency */
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    background: var(--color-bg-surface);
    /* Ensure contrast */
    color: var(--color-text-main);
    /* Correct text color */
    font-size: $font-size-base;
    font-family: var(--font-family-base);
    transition: all var(--transition-base);

    &--full-width {
        width: 100%;
    }

    &--has-icon {
        // Will be overridden by specific padding based on locale if needed, 
        // but generally we need padding for icon.
        // Assuming RTL by default for this project based on context
        padding-left: var(--space-2xl);

        // If left icon exists (which is actually right in RTL visual flow but DOM order matters)
        // Let's rely on component logic or explicit classes if possible.
        // For now, let's add generous padding on both sides if just 'has-icon' to be safe, 
        // or refine if Input.tsx passes more specifics.
        // Input.tsx passes `input-wrapper__icon--left` so let's check direction.
        // In modal, dir="rtl", so left icon is visually on the right? No, left is left.
        // Wait, standard Input usually puts icon at start.
    }

    /* Placeholder Styling - Fixing "White lines" issue */
    &::placeholder {
        color: var(--color-text-tertiary);
        /* Lighter than main text */
        font-weight: 400;
        opacity: 0.7;
    }

    &:focus {
        outline: none;
        border-color: var(--color-primary);
        box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-primary), transparent 90%);
        background: var(--color-bg-app);
        /* Slightly differentiate focus state */
    }

    &:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        background: var(--color-bg-tertiary);
    }

    &--error {
        border-color: var(--color-error);

        &:focus {
            box-shadow: 0 0 0 3px color-mix(in srgb, var(--color-error), transparent 90%);
        }
    }
}

/* RTL Adjustments for Icons */
[dir="rtl"] .input-wrapper__icon--left {
    right: var(--space-md);
    left: auto;
}

[dir="rtl"] .input-wrapper__icon--right {
    left: var(--space-md);
    right: auto;
}

[dir="rtl"] .input {
    // Basic padding
}