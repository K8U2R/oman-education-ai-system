@use 'sass:map';
@use '../abstracts/foundation-colors' as t;

// ============================================================================
// SOVEREIGN STYLE ENGINE
// Generates global CSS variables.
// NOTE: Variables MUST exist in both themes. Theme selectors should ONLY
// override what changes (mostly colors).
// ============================================================================

@mixin generate-root {
  :root {
    // 1) Colors (Default = Dark)
    // Output as UNWRAPPED values (H S L) to support Tailwind opacity.
    @each $key, $value in t.$palette-sovereign {
      --#{$key}: #{$value};
    }

    // 2) Radius
    --radius: #{map.get(t.$radius, 'lg')};
    @each $key, $value in t.$radius {
      --radius-#{$key}: #{$value};
    }

    // 3) Layout Variables (use rem, avoid px)
    --header-height: 4rem;
    --sidebar-width: 17.5rem;
    --sidebar-collapsed-width: 5rem;
    --container-max-width: 87.5rem; // 1400px â†’ 87.5rem
    --container-padding: 2rem;

    // 4) Z-Index
    --z-sticky: 100;
    --z-overlay: 900;
    --z-modal: 1000;
    --z-popover: 1100;

    // 5) Spacing
    @each $key, $value in t.$spacing {
      --space-#{$key}: #{$value};
    }

    // 6) Glass defaults (Dark)
    --glass-bg: 222 47% 11% / 0.7;
    --glass-border: 217 33% 30% / 0.5;
  }

  // Light Mode Override (ONLY what differs)
  [data-theme='light'] {
    @each $key, $value in t.$palette-sovereign-light {
      --#{$key}: #{$value};
    }

    // Optional: tweak glass for light theme if needed
    --glass-bg: 0 0% 100% / 0.7;
    --glass-border: 220 13% 91% / 0.6;
  }

  // Explicit Dark Mode (kept for completeness)
  [data-theme='dark'] {
    @each $key, $value in t.$palette-sovereign {
      --#{$key}: #{$value};
    }
  }
}

// ============================================================================
// SOVEREIGN TIER ENGINE
// Injects premium styles based on user tier (Plan Sovereignty)
// ============================================================================
@mixin generate-tiers {
  body.tier-premium {
    --radius: 1rem;

    // deeper shadows
    --shadow-elevation: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

    // glassmorphism enabled
    --glass-opacity: 0.7;
    --glass-border-opacity: 0.5;

    // Premium Accent (Gold/Royal) overrides
    --primary: 263 80% 60%;
    --ring: 45 90% 60%;
  }

  body.tier-pro {
    --radius: 0.75rem;
  }
}
