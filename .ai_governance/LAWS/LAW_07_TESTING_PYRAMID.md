# القانون 07: هرم الاختبارات (Testing Pyramid)

## التعريف (Definition)

يجب أن يتبع المشروع هرم الاختبار القياسي: قاعدة عريضة من اختبارات الوحدات (Unit Tests)، طبقة متوسطة من اختبارات التكامل (Integration)، وقمة صغيرة من اختبارات النهاية للنهاية (E2E).

## السبب التقني (The Rationale)

1. **السرعة:** اختبارات الوحدات سريعة جداً وتكتشف الأخطاء مبكراً.
2. **التكلفة:** الاعتماد فقط على E2E مكلف جداً في الصيانة والوقت.

## القائمة البيضاء (المسموح ✅)

- اختبار منطق العمل (Business Logic) في معزل باستخدام Mocks.
- استخدام `Vitest` للسرعة.

## القائمة السوداء (المحظور ❌)

- كتابة ميزات معقدة في الـ Backend دون أي ملف `.test.ts`.
- اختبارات تعتمد على قاعدة بيانات حقيقية لا يتم تصفيرها.

## آلية التنفيذ (Enforcement)

- رفض أي PR يقلل نسبة التغطية (Code Coverage).
