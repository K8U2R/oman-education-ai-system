# القانون 04: عقود البيانات (Data Contracts)

## التعريف (Definition)

يجب استخدام فئات DTO مستقلة تماماً لتعريف مدخلات ومخرجات الـ API. يُمنع الاعتماد على دوال مثل `toData()` الموجودة داخل الكيان (Entity).

## السبب التقني (The Rationale)

1. **استقرار الواجهة:** تغيير قاعدة البيانات يجب ألا يكسر التطبيق الأمامي.
2. **الأمان:** منع تسريب حقول حساسة (مثل Password Hash) بالخطأ.

## القائمة البيضاء (المسموح ✅)

- كلاسات DTO مع Decorators للتحقق.
- استخدام `instanceToPlain` أو Mapper مخصص في الـ Controller.

## القائمة السوداء (المحظور ❌)

```typescript
// محظور: إرجاع الكيان مباشرة
this.ok(res, { user: user.toData() })
```

## آلية التنفيذ (Enforcement)

وجود مجلد `dto` إلزامي في كل مديول.
